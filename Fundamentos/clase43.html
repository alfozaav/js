<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 43 - Cambiando de contexto al llamar la función.</title>
</head>
<body>
    <script>
        const gerardo = {
            nombre: 'Gerardo',
            apellido: 'Zavala'
        }

        const yesika = {
            nombre: 'Yesika',
            apellido: 'Cortés'
        }

        // function saludar () {
        //     console.log(`Hola, mi nombre es ${this.nombre}`)
        // }
        //Sale undefined porque el this está apuntando a window

        // const saludarAGerardo = saludar.bind(gerardo)

        //Binde devuelve una nueva función atando el parametro 'gerardo' al this de la funcion

        // const saludarAYesika = saludar.bind(yesika)

        // setTimeout(saludar.bind(gerardo), 1000)

        function saludar (saludo = 'Hola') {
             console.log(`${saludo}, mi nombre es ${this.nombre}`)
         }

        // setTimeout(saludar.bind(gerardo, 'Hola wey'), 1000)

        //Otra manera de hacerlo es con .call
        // saludar.call(gerardo, 'Hola wey')

        //Y tambien con .apply
        saludar.apply(gerardo, ['Hola wey', /*otro parametro*/])
    </script>
</body>
</html>

<!-- El contexto (o alcance) de una función es por lo general, window. Así que en ciertos casos, cuando intentamos referirnos a this en alguna parte del código, es posible que tengamos un comportamiento inesperado, porque el contexto quizás no sea el que esperamos.

Existen al menos tres maneras de cambiar el contexto de una función.

Usando el método .bind, enviamos la referencia a la función sin ejecutarla, pasando el contexto como parámetro.
Usando el método .call, ejecutamos inmediatamente la función con el contexto indicado
Usando el método .apply, es similar a .call pero los parámetros adicionales se pasan como un arreglo de valores -->